<!DOCTYPE html>
<html lang="en" class="light"> <!-- Added 'light' class for initial theme -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNDER DEVELOPMENT | Rain Gutter Department</title>
    <link rel="icon" type="image/png" href="icon.png"> <!-- Assuming icon.png exists -->
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <!-- Google Fonts for 'Sora' typography - Matches TCD Raingutter site -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons CDN for consistent iconography - Matches TCD Raingutter site -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- Tailwind CSS Configuration (MUST be in a script tag) -->
    <script>
        tailwind.config = {
            darkMode: 'class', // Enable dark mode based on 'dark' class on HTML tag
            theme: {
                extend: {
                    colors: {
                        // Re-themed to be monochromatic, inspired by Daybreak Studio
                        theme: {
                           background: 'rgb(255, 255, 255)',
                           surface: 'rgb(247, 247, 247)',
                           border: 'rgb(230, 230, 230)',
                           'text-primary': 'rgb(5, 5, 5)',
                           'text-muted': 'rgb(107, 114, 128)',
                           accent: 'rgb(0, 122, 255)',
                           'accent-contrast': 'rgb(255, 255, 255)', // White text on accent
                           success: 'rgb(40, 167, 69)',
                           error: 'rgb(220, 53, 69)',
                           info: 'rgb(23, 162, 184)',
                           warning: 'rgb(255, 193, 7)',
                           'accent-rgb': '0, 122, 255', // For rgba usage in custom CSS
                           'text-primary-rgb': '5, 5, 5',
                        },
                        darkTheme: {
                           background: 'rgb(20, 20, 20)',
                           surface: 'rgb(30, 30, 30)',
                           border: 'rgb(50, 50, 50)',
                           'text-primary': 'rgb(240, 240, 240)',
                           'text-muted': 'rgb(150, 150, 150)',
                           accent: 'rgb(0, 122, 255)',
                           'accent-contrast': 'rgb(255, 255, 255)',
                           success: 'rgb(40, 167, 69)',
                           error: 'rgb(220, 53, 69)',
                           info: 'rgb(23, 162, 184)',
                           warning: 'rgb(255, 193, 7)',
                           'accent-rgb': '0, 122, 255',
                           'text-primary-rgb': '240, 240, 240',
                        },
                    },
                    fontFamily: {
                        sans: ['Sora', 'sans-serif'], // Set Sora as default sans-serif
                    },
                    transitionTimingFunction: {
                        'custom-ease': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
                    },
                    boxShadow: {
                        'subtle': '0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)',
                        'subtle-dark': '0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.18)',
                    }
                }
            }
        };
    </script>
    
    <!-- Custom Stylesheet (for non-Tailwind specific styles like scrollbars) -->
    <style>
        /* Custom CSS for scrollbars and animations (TCD Raingutter style) */
        :root {
            --scrollbar-thumb-color: rgba(107, 114, 128, 0.5);
            --scrollbar-thumb-hover-color: rgba(5, 5, 5, 0.5);
        }
        html.dark { /* Styles applied when the 'dark' class is present on the <html> tag */
            --scrollbar-thumb-color: rgba(107, 114, 128, 0.4);
            --scrollbar-thumb-hover-color: rgba(230, 230, 230, 0.5);
        }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-color); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--scrollbar-thumb-hover-color); }
        body { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb-color) transparent; }

        /* Animation for loading spinner (used for processing state) */
        .animate-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* Custom transition timing function for smooth UI changes */
        .ease-custom-ease { transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94); }

        /* Specific style for drag-over state on drop area - not directly used here but kept for consistency */
        #drop-area.dragover-active { 
            border-color: rgb(var(--theme-accent-rgb)) !important; /* Use RGB values from Tailwind config */
            background-color: rgba(var(--theme-accent-rgb), 0.1) !important; 
        }

        /* Image Preview Styling - not directly used here but kept for consistency */
        .image-preview {
            width: 100px;
            height: 100px;
            border: 1px solid var(--theme-border); /* Use Tailwind defined border color */
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--theme-background); /* Matches TCD Raingutter's light background for previews */
        }

        html.dark .image-preview { /* Dark mode adjustments for image preview */
            border-color: var(--darkTheme-border);
            background-color: var(--darkTheme-background);
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            object-fit: contain;
        }

        /* Extracted Numbers List Item Styling - not directly used here but kept for consistency */
        .numbers-list li {
            padding: 12px 16px; /* Increased padding for better readability */
            border-bottom: 1px solid var(--theme-border); /* Subtle border for list items */
            font-size: 1em; /* Adjusted font size */
            color: var(--theme-text-primary);
            transition: background-color 0.2s ease-custom-ease;
        }

        html.dark .numbers-list li {
            border-color: var(--darkTheme-border);
            color: var(--darkTheme-text-primary);
        }

        .numbers-list li:last-child {
            border-bottom: none; /* No border for the last item */
        }

        /* Specific styles for messages within the list - not directly used here but kept for consistency */
        .numbers-list li.no-numbers,
        .numbers-list li.error-item {
            text-align: center;
            color: var(--theme-text-muted); /* Muted text color for messages */
            font-style: italic;
            padding: 16px; /* More padding for messages */
        }

        html.dark .numbers-list li.no-numbers,
        html.dark .numbers-list li.error-item {
            color: var(--darkTheme-text-muted);
        }

        /* Message Box (Toast Notification) Styling - not directly used here but kept for consistency */
        #app-message {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Slightly stronger shadow for toast */
        }

        html.dark #app-message {
            box-shadow: 0 4px 12px rgba(0,0,0,0.4); /* Darker shadow for dark mode toast */
        }
    </style>
</head>
<body class="bg-theme-background text-theme-text-primary antialiased min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 ease-custom-ease font-sans">
    <div class="container max-w-4xl mx-auto p-6 bg-theme-background dark:bg-darkTheme-background rounded-lg shadow-lg border border-theme-border dark:border-darkTheme-border transition-colors duration-300 ease-custom-ease">
        
        <!-- Header Section -->
        <header class="flex flex-col">
            <!-- Button Row - Always on top -->
            <div class="flex justify-between items-center w-full z-10 mb-4">
                <!-- Left Button Group -->
                <div class="flex items-center gap-2">
                    <a href="https://tcd-raingutter.netlify.app/" aria-label="Back to home" title="Back to Home"
                       class="p-2 rounded-full bg-theme-surface dark:bg-darkTheme-surface text-theme-text-primary dark:text-darkTheme-text-primary hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-theme-accent transition-colors duration-200">
                        <i class="bi bi-house-door text-lg"></i>
                    </a>
                    <button id="closeWindowBtn" aria-label="Close window" title="Close Window"
                            class="p-2 rounded-full bg-theme-surface dark:bg-darkTheme-surface text-theme-text-primary dark:text-darkTheme-text-primary hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-theme-accent transition-colors duration-200">
                        <i class="bi bi-x-lg text-lg"></i>
                    </button>
                </div>

                <!-- Theme Toggle Button - Right side -->
                <button id="themeToggleBtn" aria-label="Toggle theme" title="Toggle Theme"
                        class="p-2 rounded-full bg-theme-surface dark:bg-darkTheme-surface text-theme-text-primary dark:text-darkTheme-text-primary hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-theme-accent transition-colors duration-200">
                    <i class="bi bi-moon-fill icon-moon text-lg"></i>
                    <i class="bi bi-sun-fill icon-sun text-lg hidden"></i>
                </button>
            </div>

            <!-- Title Section - Below buttons -->
            <div class="w-full text-center">
                <h1 class="text-xl sm:text-2xl font-bold text-theme-text-primary dark:text-darkTheme-text-primary mb-1">☔ RAIN GUTTER DEPT TOOLS</h1>
                <p class="text-theme-text-muted dark:text-darkTheme-text-muted text-xs">UNDER DEVELOPMENT</p>
            </div>
        </header>

        <main class="content-wrapper flex flex-col items-center justify-center min-h-[300px] p-6 bg-theme-surface dark:bg-darkTheme-surface rounded-lg shadow-subtle dark:shadow-subtle-dark border border-theme-border dark:border-darkTheme-border transition-colors duration-300 ease-custom-ease">
            <i class="bi bi-code-slash text-6xl text-theme-accent dark:text-darkTheme-accent mb-4 animate-pulse"></i>
            <!-- Image Added Here with ID and transition classes -->
            <video id="devImage" autoplay loop muted playsinline 
       class="max-w-full h-auto mx-auto block rounded-md shadow-md mb-6 cursor-pointer transition-opacity duration-500 ease-in-out opacity-100">
    <source src="rg.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>
            <h2 class="text-2xl font-semibold text-theme-text-primary dark:text-darkTheme-text-primary mb-2 text-center">This Page is Under Development</h2>
            <p class="text-theme-text-muted dark:text-darkTheme-text-muted text-center max-w-md">
                Please check back soon!
            </p>
        </main>
        
        <footer class="text-center mt-8 text-theme-text-muted dark:text-darkTheme-text-muted text-xs">
            © 2025 RAIN GUTTER DEPARTMENT
        </footer>
    </div>
    
    <!-- Message box element (styled to match TCD Raingutter's toast notifications) -->
    <div id="app-message" class="fixed top-6 left-1/2 -translate-x-1/2 bg-theme-surface dark:bg-darkTheme-surface text-theme-text-primary dark:text-darkTheme-text-primary p-4 rounded-lg shadow-lg border border-theme-border dark:border-darkTheme-border opacity-0 transition-opacity duration-300 ease-custom-ease z-50 hidden" role="alert" aria-live="polite"></div>
    
    <!-- Main JavaScript file -->
    <script>
        // DOM Elements
        const htmlElement = document.documentElement; // Reference to the <html> tag for theme toggling
        const appMessage = document.getElementById('app-message'); // For custom message box
        const devImage = document.getElementById('devImage'); // Reference to the new image

        // Header Buttons
        const themeToggleButton = document.getElementById('themeToggleBtn');
        const moonIcon = themeToggleButton.querySelector('.icon-moon');
        const sunIcon = themeToggleButton.querySelector('.icon-sun');
        const backToHomeBtn = document.getElementById('backToHomeBtn'); // Back to Home button

        // Image sources for cycling
        const imageSources = [
            "rg.jpg",
            "rg4.jpg",
            "rg3.jpg" // Added a third image for more cycling
        ];
        let currentImageIndex = 0;

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Theme Toggle Event Listener
            if (themeToggleButton) {
                themeToggleButton.addEventListener('click', () => {
                    const currentTheme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
                    applyTheme(currentTheme === 'light' ? 'dark' : 'light');
                });
            }

            // Back to Home Button Event Listener
            if (backToHomeBtn) {
                backToHomeBtn.addEventListener('click', () => {
                    // Redirects to the main index.html (assuming your main page is index.html)
                    window.location.href = 'index.html'; 
                    // If you want to close the current tab/window (only works if opened by script or user action):
                    // window.close(); 
                });
            }

            // Image Click Event Listener
            if (devImage) {
                devImage.addEventListener('click', () => {
                    // Start fade-out animation
                    devImage.classList.remove('opacity-100');
                    devImage.classList.add('opacity-0');

                    // Wait for fade-out to complete, then change image source and fade in
                    setTimeout(() => {
                        currentImageIndex = (currentImageIndex + 1) % imageSources.length;
                        devImage.src = imageSources[currentImageIndex];
                        // Fade in the new image
                        devImage.classList.remove('opacity-0');
                        devImage.classList.add('opacity-100');
                    }, 500); // Matches the CSS transition duration (duration-500)
                });
            }

            // Load saved theme on startup or default to system preference
            const preferredTheme = localStorage.getItem('tcdRaingutterTheme') || 
                                   (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            applyTheme(preferredTheme);
        });

        // --- Functions ---
        /**
         * Displays a temporary message box (toast notification).
         * @param {string} message - The message to display.
         * @param {number} [duration=3000] - Duration in milliseconds.
         */
        function showMessageBox(message, duration = 3000) {
            appMessage.textContent = message;
            appMessage.classList.remove('hidden', 'opacity-0');
            appMessage.classList.add('opacity-100');

            setTimeout(() => {
                appMessage.classList.remove('opacity-100');
                appMessage.classList.add('opacity-0');
                setTimeout(() => {
                    appMessage.classList.add('hidden');
                }, 300); // Wait for fade-out transition
            }, duration);
        }

        /**
         * Applies the specified theme (light or dark) to the HTML document.
         * Stores the preference in localStorage.
         * @param {string} theme - 'light' or 'dark'.
         */
        function applyTheme(theme) {
            htmlElement.classList.remove('light', 'dark');
            htmlElement.classList.add(theme);
            localStorage.setItem('tcdRaingutterTheme', theme); // Use a specific key for consistency

            // Update theme toggle icon visibility
            if (moonIcon && sunIcon) {
                moonIcon.style.display = theme === 'dark' ? 'none' : 'block';
                sunIcon.style.display = theme === 'dark' ? 'block' : 'none';
            }
        }

        document.getElementById('closeWindowBtn').addEventListener('click', function() {
    // Show confirmation alert
    const userConfirmed = confirm('Are you sure you want to close this window?');
    
    if (userConfirmed) {
        try {
            // Attempt to close the window
            window.close();
            
            // Fallback if window couldn't be closed
            if (!window.closed) {
                alert('This window cannot be closed programmatically. Please close it manually.');
            }
        } catch (error) {
            alert('An error occurred while trying to close the window: ' + error.message);
        }
    }
});


    </script>
</body>
</html>
